<div xmlns:tal="http://xml.zope.org/namespaces/tal"
     xmlns:ajax="http://namesspaces.bluedynamics.eu/ajax"
     class="buyable viewlet"
     i18n:domain="bda.plone.shop"
     ajax:bind="cart_changed"
     tal:define="addable view/item_addable;
                 css string:cart_item_${context/UID}"
     tal:attributes="ajax:target context/absolute_url;
                     ajax:action string:buyable_controls:.${css}:replace;
                     class string:buyable viewlet ${css}">

  <tal:info condition="view/can_view_buyable_info">
    <div class="availabilityWrapper">
      <div class="availability" tal:condition="view/show_available">
        <strong i18n:translate="availability">Availability</strong>
        <div class="signal green"
             tal:attributes="class string:signal ${view/availability_signal}">
          &nbsp;
        </div>
        <div class="availability_details"
             tal:content="structure view/availability_details">
          deliverable until 1.1.2013
        </div>
      </div>
    </div>
  </tal:info>

  <div class="form-row details ${python:'with-comment' if view.comment_enabled else 'without-comment'}">
    <tal:info condition="view/can_view_buyable_info">
    <div class="form-group form-inline col-md">
      <div class="input-group">
        <tal:net condition="not:view/display_gross"
                define="price_original view/item_net_original;
                        price view/item_net">
          <span class="price" i18n:translate="price">Price</span>
          <span class="price original"
              tal:condition="python:view.not_eq(price_original, price)">
            <span tal:replace="python:'%0.2f' % price_original">1.00</span>
            <span tal:replace="view/currency">EUR</span>
          </span>
          <span class="price discount">
            <span tal:replace="python:'%0.2f' % view.item_net">1.00</span>
            <span tal:replace="view/currency">EUR</span>
            (<span i18n:translate="net">Net</span>)
          </span>
        </tal:net>

        <tal:gross condition="view/display_gross"
                define="price_original view/item_gross_original;
                        price view/item_gross">
          <span class="price" i18n:translate="price">Price</span>
          <span class="price original"
              tal:condition="python:view.not_eq(price_original, price)">
            <span tal:replace="python:'%0.2f' % price_original">1.0</span>
            <span tal:replace="view/currency">EUR</span>
          </span>
          <span class="price discount">
            <span tal:replace="python:'%0.2f' % price">1.0</span>
            <span tal:replace="view/currency">EUR</span>
            (<span i18n:translate="gross">Gross</span>)
          </span>
        </tal:gross>

        <span class="vat" i18n:translate="vat">Vat</span>
        <span class="vat" tal:content="string:${view/item_vat}%">20 %</span>
      </div>
    </div>
    </tal:info>

    <tal:buy condition="view/can_buy_items">
    <div class="form-group form-inline col-md">
      <div class="input-group">
        <label class="quantity mr-2" tal:content="view/quantity_unit">Quantity</label>
        <div class="quantity">
          <input type="number"
                size="2"
                value="1"
                min="0"
                class="form-control cart_item_count"
                tal:define="css python: view.quantity_unit_float and \
                                        'form-control cart_item_count quantity_unit_float' or
                                        'form-control cart_item_count';"
                tal:attributes="class css;
                                disabled python: not addable and 'disabled' or None" />
        </div>

      <tal:comment condition="view/comment_enabled">
        <div class="extra_comment" i18n:translate="comment">Comment</div>
        <div class="extra_comment">
          <input type="text"
                 size="16"
                 value=""
                 class="form-control cart_item_comment"
                 tal:define="css python: view.comment_required and \
                                         'form-control cart_item_comment required' or
                                         'form-control cart_item_comment';"
                 tal:attributes="class css;
                                 disabled python: not addable and 'disabled' or None" />
        </div>
      </tal:comment>
      <span tal:condition="view/can_buy_items"
            class="cart_item_uid"
            style="display: none;"
            tal:content="view/item_uid">12345678</span>

      <tal:addable condition="addable">
        <a href="" i18n:attributes="title add_to_cart"
           class="btn btn-primary add_cart_item buyable_add_to_cart show_status_message">
           <svg class="bi bi-bag" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M14 5H2v9a1 1 0 001 1h10a1 1 0 001-1V5zM1 4v10a2 2 0 002 2h10a2 2 0 002-2V4H1z" clip-rule="evenodd"/>
            <path d="M8 1.5A2.5 2.5 0 005.5 4h-1a3.5 3.5 0 117 0h-1A2.5 2.5 0 008 1.5z"/>
          </svg>

           <span i18n:translate="add_to_cart">add to cart</span>
        </a>
        <a href="" i18n:attributes="title update_cart"
           class="btn btn-light update_cart_item buyable_update_cart show_status_message">
           <svg class="bi bi-arrow-repeat" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M2.854 7.146a.5.5 0 00-.708 0l-2 2a.5.5 0 10.708.708L2.5 8.207l1.646 1.647a.5.5 0 00.708-.708l-2-2zm13-1a.5.5 0 00-.708 0L13.5 7.793l-1.646-1.647a.5.5 0 00-.708.708l2 2a.5.5 0 00.708 0l2-2a.5.5 0 000-.708z" clip-rule="evenodd"/>
            <path fill-rule="evenodd" d="M8 3a4.995 4.995 0 00-4.192 2.273.5.5 0 01-.837-.546A6 6 0 0114 8a.5.5 0 01-1.001 0 5 5 0 00-5-5zM2.5 7.5A.5.5 0 013 8a5 5 0 009.192 2.727.5.5 0 11.837.546A6 6 0 012 8a.5.5 0 01.501-.5z" clip-rule="evenodd"/>
          </svg>
           <span i18n:translate="update_cart">update cart</span>
        </a>
      </tal:addable>

      <tal:not_addable condition="not:addable">
        <span class="buyable_add_to_cart_disabled"
              i18n:translate="add_to_cart">add to cart</span>
        <span class="buyable_update_cart_disabled"
              i18n:translate="update_cart">update cart</span>
      </tal:not_addable>
    </div>
  </div>
  </tal:buy>

  </div>


</div>
